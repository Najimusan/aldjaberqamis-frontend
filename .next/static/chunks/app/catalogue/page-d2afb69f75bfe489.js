(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[567],{3545:function(e,t,a){Promise.resolve().then(a.bind(a,4481))},4481:function(e,t,a){"use strict";a.r(t);var s=a(7437),l=a(2265),i=a(5251),r=a(6532),n=a(2482),c=a(1813),o=a(4689),d=a(4033),u=a(664),x=a(6112),h=a(9810),m=a(826),g=a(5925);t.default=()=>{let e=(0,d.useSearchParams)(),[t,a]=(0,l.useState)([]),[p,b]=(0,l.useState)(!0),[v,j]=(0,l.useState)({}),[f,N]=(0,l.useState)("newest"),[w,y]=(0,l.useState)("grid"),[k,C]=(0,l.useState)(!1),[D,S]=(0,l.useState)(""),[P,E]=(0,l.useState)([]),[A,z]=(0,l.useState)(!1),[_,T]=(0,l.useState)({page:1,totalPages:1,total:0}),O=async function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;try{b(!0),console.log("\uD83D\uDE80 fetchProducts called with:",{page:e,newFilters:t,newSort:s}),console.log("\uD83D\uDCCA Current filters state:",v);let l=await m.fi.getAll(t,e,12);console.log("✅ Products response:",l.data.length,"products"),a(l.data),T({page:l.page,totalPages:l.totalPages,total:l.total})}catch(e){console.error("❌ Erreur lors du chargement des produits:",e),g.default.error("Erreur lors du chargement des produits")}finally{b(!1)}},Z=async()=>{console.log("\uD83D\uDD04 Loading initial data..."),await H();let t=e.get("category"),a=e.get("search"),s=e.get("minPrice"),l=e.get("maxPrice");console.log("\uD83D\uDCCB URL params:",{categoryFromUrl:t,searchFromUrl:a,minPriceFromUrl:s,maxPriceFromUrl:l});let i={};t&&(i.category=t),a&&(i.search=a,S(a)),s&&(i.minPrice=parseFloat(s)),l&&(i.maxPrice=parseFloat(l)),console.log("\uD83C\uDFAF Setting filters:",i),j(i),z(!0),console.log("\uD83D\uDCE6 Fetching products with initial filters..."),O(1,i,f)};(0,l.useEffect)(()=>{Z()},[]);let F=e=>{console.log("\uD83C\uDF9B️ Manual filters change:",e),j(e),O(1,e,f)},H=async()=>{E([{_id:"1",name:"Qamis",slug:"qamis",color:"#8B5CF6",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"2",name:"Hidjab",slug:"hidjab",color:"#EC4899",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"3",name:"Parfum",slug:"parfum",color:"#F59E0B",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"4",name:"Pantalon",slug:"pantalon",color:"#10B981",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"5",name:"Jabador",slug:"jabador",color:"#EF4444",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"6",name:"Accessoires",slug:"accessoires",color:"#6B7280",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}]);try{let e=await m.Yc.getAll();e.length>0&&E(e)}catch(e){console.error("Erreur lors du chargement des cat\xe9gories:",e)}},I=(0,l.useRef)(null),B=e=>{S(e),I.current&&clearTimeout(I.current),I.current=setTimeout(()=>{e!==v.search&&(console.log("\uD83D\uDD0D Search debounced:",e),R("search",e))},500)},R=(e,t)=>{let a={...v,[e]:t||void 0};console.log("\uD83C\uDF9B️ Filter change:",{key:e,value:t,newFilters:a}),F(a)},q=e=>{N(e),O(1,v,e)},L=e=>{O(e,v,f),window.scrollTo({top:0,behavior:"smooth"})},M=()=>{j({}),S(""),O(1,{},f)};return(0,s.jsxs)("div",{className:"min-h-screen bg-dark-950",children:[(0,s.jsx)(u.Z,{}),(0,s.jsxs)("main",{className:"pt-16",children:[(0,s.jsx)("section",{className:"py-12 bg-dark-900",children:(0,s.jsx)("div",{className:"container-custom section-padding",children:(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[(0,s.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:v.category?"Catalogue - ".concat(v.category.charAt(0).toUpperCase()+v.category.slice(1)):"Notre Catalogue"}),(0,s.jsx)("p",{className:"text-dark-300 text-lg max-w-2xl mx-auto",children:v.category?"D\xe9couvrez notre collection de ".concat(v.category," de qualit\xe9"):"D\xe9couvrez notre collection compl\xe8te de qamis et accessoires musulmans de qualit\xe9"})]})})}),(0,s.jsx)("section",{className:"py-6 bg-dark-800 border-b border-dark-700",children:(0,s.jsxs)("div",{className:"container-custom section-padding",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[(0,s.jsx)("div",{className:"md:hidden",children:(0,s.jsxs)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>C(!k),className:"btn-secondary flex items-center space-x-2",children:[(0,s.jsx)(r.Z,{size:20}),(0,s.jsx)("span",{children:"Filtres"})]})}),(0,s.jsxs)("div",{className:"hidden md:flex flex-1 items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(n.Z,{size:20,className:"text-white"}),(0,s.jsx)("span",{className:"text-white font-medium",children:"Filtres:"})]}),(0,s.jsxs)("select",{value:v.category||"",onChange:e=>R("category",e.target.value),className:"input-field w-48",children:[(0,s.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),P.length>0?P.map(e=>(0,s.jsx)("option",{value:e.name.toLowerCase(),children:e.name},e._id)):(0,s.jsx)("option",{disabled:!0,children:"Chargement des cat\xe9gories..."})]}),(0,s.jsx)("input",{type:"text",placeholder:"Rechercher...",value:D,onChange:e=>B(e.target.value),className:"input-field w-64"}),(0,s.jsx)("input",{type:"number",placeholder:"Prix min",value:v.minPrice||"",onChange:e=>R("minPrice",e.target.value),className:"input-field w-32"}),(0,s.jsx)("input",{type:"number",placeholder:"Prix max",value:v.maxPrice||"",onChange:e=>R("maxPrice",e.target.value),className:"input-field w-32"}),(0,s.jsx)("button",{onClick:M,className:"btn-ghost text-sm",children:"Effacer"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[v.category&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-white/10 px-3 py-1 rounded-lg",children:[(0,s.jsxs)("span",{className:"text-white text-sm",children:["Cat\xe9gorie: ",(0,s.jsx)("span",{className:"font-semibold capitalize",children:v.category})]}),(0,s.jsx)("button",{onClick:()=>R("category",""),className:"text-white hover:text-red-400 transition-colors",children:"\xd7"})]}),(0,s.jsx)("select",{value:f,onChange:e=>q(e.target.value),className:"input-field w-48",children:[{value:"newest",label:"Plus r\xe9cents"},{value:"oldest",label:"Plus anciens"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix d\xe9croissant"},{value:"name",label:"Nom A-Z"}].map(e=>(0,s.jsx)("option",{value:e.value,children:e.label},e.value))}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>y("grid"),className:"p-2 rounded-lg transition-all duration-300 ".concat("grid"===w?"bg-white text-dark-950":"bg-dark-700 text-white hover:bg-dark-600"),children:(0,s.jsx)(c.Z,{size:20})}),(0,s.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>y("list"),className:"p-2 rounded-lg transition-all duration-300 ".concat("list"===w?"bg-white text-dark-950":"bg-dark-700 text-white hover:bg-dark-600"),children:(0,s.jsx)(o.Z,{size:20})})]})]})]}),k&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden mt-6 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("select",{value:v.category||"",onChange:e=>R("category",e.target.value),className:"input-field",children:[(0,s.jsx)("option",{value:"",children:"Toutes les cat\xe9gories"}),P.map(e=>(0,s.jsx)("option",{value:e.name.toLowerCase(),children:e.name},e._id))]}),(0,s.jsx)("input",{type:"text",placeholder:"Rechercher...",value:D,onChange:e=>B(e.target.value),className:"input-field"}),(0,s.jsx)("input",{type:"number",placeholder:"Prix min",value:v.minPrice||"",onChange:e=>R("minPrice",e.target.value),className:"input-field"}),(0,s.jsx)("input",{type:"number",placeholder:"Prix max",value:v.maxPrice||"",onChange:e=>R("maxPrice",e.target.value),className:"input-field"})]}),(0,s.jsx)("button",{onClick:M,className:"btn-secondary w-full",children:"Effacer tous les filtres"})]})]})}),(0,s.jsx)("section",{className:"py-8",children:(0,s.jsxs)("div",{className:"container-custom section-padding",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("p",{className:"text-dark-300",children:[_.total," produit",_.total>1?"s":""," trouv\xe9",_.total>1?"s":""]}),(0,s.jsxs)("p",{className:"text-dark-300",children:["Page ",_.page," sur ",_.totalPages]})]}),p?(0,s.jsx)("div",{className:"grid gap-6 ".concat("grid"===w?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:[...Array(8)].map((e,t)=>(0,s.jsxs)("div",{className:"bg-dark-800 rounded-xl p-6 animate-pulse",children:[(0,s.jsx)("div",{className:"w-full h-48 bg-dark-700 rounded-lg mb-4"}),(0,s.jsx)("div",{className:"h-4 bg-dark-700 rounded mb-2"}),(0,s.jsx)("div",{className:"h-4 bg-dark-700 rounded w-3/4 mb-4"}),(0,s.jsx)("div",{className:"h-6 bg-dark-700 rounded w-1/2"})]},t))}):0===t.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[(0,s.jsx)("div",{className:"w-24 h-24 bg-dark-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,s.jsx)(n.Z,{size:48,className:"text-dark-400"})}),(0,s.jsx)("h3",{className:"text-xl font-semibold text-white mb-2",children:"Aucun produit trouv\xe9"}),(0,s.jsx)("p",{className:"text-dark-300 mb-6",children:"Essayez de modifier vos crit\xe8res de recherche"}),(0,s.jsx)("button",{onClick:M,className:"btn-primary",children:"Effacer les filtres"})]}):(0,s.jsx)("div",{className:"grid gap-6 ".concat("grid"===w?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"),children:t.map((e,t)=>(0,s.jsx)(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},children:(0,s.jsx)(h.Z,{product:e})},e._id))}),_.totalPages>1&&(0,s.jsx)(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"flex justify-center mt-12",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(_.page-1),disabled:1===_.page,className:"px-4 py-2 bg-dark-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-dark-700 transition-all duration-300",children:"Pr\xe9c\xe9dent"}),[...Array(_.totalPages)].map((e,t)=>{let a=t+1,l=a===_.page;return(0,s.jsx)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(a),className:"px-4 py-2 rounded-lg transition-all duration-300 ".concat(l?"bg-white text-dark-950":"bg-dark-800 text-white hover:bg-dark-700"),children:a},a)}),(0,s.jsx)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>L(_.page+1),disabled:_.page===_.totalPages,className:"px-4 py-2 bg-dark-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-dark-700 transition-all duration-300",children:"Suivant"})]})})]})})]}),(0,s.jsx)(x.Z,{})]})}},9810:function(e,t,a){"use strict";var s=a(7437),l=a(2265),i=a(5251),r=a(1396),n=a.n(r),c=a(6691),o=a.n(c),d=a(9670),u=a(3505),x=a(1657),h=a(1221),m=a(6933),g=a(826),p=a(5925);t.Z=e=>{let{product:t}=e,[a,r]=(0,l.useState)(!1),[c,b]=(0,l.useState)(t.sizes[0]||""),[v,j]=(0,l.useState)(!1),f=Array.isArray(t.colors)&&t.colors.length>0?"string"==typeof t.colors[0]?String(t.colors[0]):t.colors[0].name||t.colors[0].hex||"":"",[N,w]=(0,l.useState)(f),{addToCart:y}=(0,h.useCart)();return(0,s.jsx)(i.E.div,{whileHover:{y:-5},transition:{duration:.3},className:"group bg-dark-800 rounded-xl overflow-hidden border border-dark-700 hover:border-dark-600 transition-all duration-300",onMouseEnter:()=>r(!0),onMouseLeave:()=>r(!1),children:(0,s.jsxs)(n(),{href:"/produit/".concat(t._id),children:[(0,s.jsxs)("div",{className:"relative h-64 bg-dark-700 overflow-hidden",children:[t.images[0]&&!v?(0,s.jsx)(o(),{src:(0,g.Jn)(t.images[0]),alt:t.name,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-500",onError:()=>j(!0),unoptimized:!0}):(0,s.jsx)(m.Z,{width:400,height:256,className:"w-full h-full",text:t.name}),(0,s.jsx)(i.E.div,{initial:{opacity:0},animate:{opacity:a?1:0},transition:{duration:.3},className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:(0,s.jsx)(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.95},className:"p-3 bg-white/20 backdrop-blur-sm rounded-full text-white hover:bg-white/30 transition-all duration-300",children:(0,s.jsx)(d.Z,{size:20})})}),t.stock<=5&&t.stock>0&&(0,s.jsxs)("div",{className:"absolute top-3 left-3 bg-yellow-500 text-dark-950 text-xs font-bold px-2 py-1 rounded-full",children:["Plus que ",t.stock," en stock"]}),0===t.stock&&(0,s.jsx)("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:(0,s.jsx)("span",{className:"text-white font-semibold",children:"Rupture de stock"})})]}),(0,s.jsxs)("div",{className:"p-4",children:[(0,s.jsx)("p",{className:"text-dark-400 text-sm font-medium mb-2 capitalize",children:t.category}),(0,s.jsx)("h3",{className:"text-white font-semibold text-lg mb-2 line-clamp-2 group-hover:text-dark-300 transition-colors duration-300",children:t.name}),(0,s.jsx)("p",{className:"text-dark-400 text-sm mb-4 line-clamp-2",children:t.description}),a&&t.sizes.length>0&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},transition:{duration:.3},className:"mb-4 space-y-3",children:[t.sizes.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-300 text-sm mb-2",children:"Taille:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.sizes.map(e=>(0,s.jsx)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),b(e)},className:"px-3 py-1 text-xs rounded-full border transition-all duration-300 ".concat(c===e?"bg-white text-dark-950 border-white":"bg-transparent text-dark-300 border-dark-600 hover:border-dark-400"),children:e},e))})]}),t.colors.length>0&&(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-dark-300 text-sm mb-2",children:"Couleur:"}),(0,s.jsx)("div",{className:"flex flex-wrap gap-2",children:t.colors.map(e=>{let t="string"==typeof e?e:(null==e?void 0:e.name)||(null==e?void 0:e.hex)||"",a="string"==typeof e?void 0:null==e?void 0:e.hex,l=N===t||!!a&&N===a;return(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),w(t||a||"")},className:"px-3 py-1 text-xs rounded-full border transition-all duration-300 ".concat(l?"bg-white text-dark-950 border-white":"bg-transparent text-dark-300 border-dark-600 hover:border-dark-400"),title:t,children:(0,s.jsxs)("span",{className:"inline-flex items-center gap-2",children:[a?(0,s.jsx)("span",{"aria-hidden":!0,className:"inline-block w-3 h-3 rounded-full border border-dark-600",style:{backgroundColor:a}}):null,t]})},a||t)})})]})]}),(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("p",{className:"text-white font-bold text-xl",children:(0,x.T4)(t.price)}),t.stock>0&&(0,s.jsxs)("p",{className:"text-dark-400 text-sm",children:[t.stock," en stock"]})]}),(0,s.jsx)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:e=>{if(e.preventDefault(),e.stopPropagation(),!c||!N){p.default.error("Veuillez s\xe9lectionner une taille et une couleur");return}y(t,1,c,N),p.default.success("Produit ajout\xe9 au panier")},disabled:0===t.stock||!c||!N,className:"p-3 bg-white text-dark-950 rounded-lg hover:bg-dark-200 disabled:bg-dark-700 disabled:text-dark-400 disabled:cursor-not-allowed transition-all duration-300",children:(0,s.jsx)(u.Z,{size:20})})]})]})]})})}},6933:function(e,t,a){"use strict";var s=a(7437);a(2265),t.Z=e=>{let{width:t=400,height:a=400,className:l="",text:i="Produit"}=e;return(0,s.jsx)("div",{className:"bg-gray-200 flex items-center justify-center text-gray-500 ".concat(l),style:{width:t,height:a},children:(0,s.jsxs)("div",{className:"text-center",children:[(0,s.jsx)("div",{className:"w-16 h-16 mx-auto mb-2 bg-gray-300 rounded-full flex items-center justify-center",children:(0,s.jsx)("svg",{className:"w-8 h-8 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:(0,s.jsx)("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})}),(0,s.jsx)("p",{className:"text-sm font-medium",children:i})]})})}}},function(e){e.O(0,[581,829,7,561,125,806,971,938,744],function(){return e(e.s=3545)}),_N_E=e.O()}]);