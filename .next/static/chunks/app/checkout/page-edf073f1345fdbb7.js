(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[285],{4423:function(e,a,s){Promise.resolve().then(s.bind(s,2261))},2261:function(e,a,s){"use strict";s.r(a),s.d(a,{default:function(){return v}});var r=s(7437),l=s(2265),i=s(5251),n=s(4033),d=s(1865),t=s(1738),c=s(7972),m=s(6142),o=s(664),x=s(6112),u=s(1221),h=s(826);let p=[{code:"01",name:"Adrar",nameAr:"أدرار"},{code:"02",name:"Chlef",nameAr:"الشلف"},{code:"03",name:"Laghouat",nameAr:"الأغواط"},{code:"04",name:"Oum El Bouaghi",nameAr:"أم البواقي"},{code:"05",name:"Batna",nameAr:"باتنة"},{code:"06",name:"B\xe9ja\xefa",nameAr:"بجاية"},{code:"07",name:"Biskra",nameAr:"بسكرة"},{code:"08",name:"B\xe9char",nameAr:"بشار"},{code:"09",name:"Blida",nameAr:"البليدة"},{code:"10",name:"Bouira",nameAr:"البويرة"},{code:"11",name:"Tamanrasset",nameAr:"تمنراست"},{code:"12",name:"T\xe9bessa",nameAr:"تبسة"},{code:"13",name:"Tlemcen",nameAr:"تلمسان"},{code:"14",name:"Tiaret",nameAr:"تيارت"},{code:"15",name:"Tizi Ouzou",nameAr:"تيزي وزو"},{code:"16",name:"Alger",nameAr:"الجزائر"},{code:"17",name:"Djelfa",nameAr:"الجلفة"},{code:"18",name:"Jijel",nameAr:"جيجل"},{code:"19",name:"S\xe9tif",nameAr:"سطيف"},{code:"20",name:"Sa\xefda",nameAr:"سعيدة"},{code:"21",name:"Skikda",nameAr:"سكيكدة"},{code:"22",name:"Sidi Bel Abb\xe8s",nameAr:"سيدي بلعباس"},{code:"23",name:"Annaba",nameAr:"عنابة"},{code:"24",name:"Guelma",nameAr:"قالمة"},{code:"25",name:"Constantine",nameAr:"قسنطينة"},{code:"26",name:"M\xe9d\xe9a",nameAr:"المدية"},{code:"27",name:"Mostaganem",nameAr:"مستغانم"},{code:"28",name:"M'Sila",nameAr:"المسيلة"},{code:"29",name:"Mascara",nameAr:"معسكر"},{code:"30",name:"Ouargla",nameAr:"ورقلة"},{code:"31",name:"Oran",nameAr:"وهران"},{code:"32",name:"El Bayadh",nameAr:"البيض"},{code:"33",name:"Illizi",nameAr:"إليزي"},{code:"34",name:"Bordj Bou Arr\xe9ridj",nameAr:"برج بوعريريج"},{code:"35",name:"Boumerd\xe8s",nameAr:"بومرداس"},{code:"36",name:"El Tarf",nameAr:"الطارف"},{code:"37",name:"Tindouf",nameAr:"تندوف"},{code:"38",name:"Tissemsilt",nameAr:"تيسمسيلت"},{code:"39",name:"El Oued",nameAr:"الوادي"},{code:"40",name:"Khenchela",nameAr:"خنشلة"},{code:"41",name:"Souk Ahras",nameAr:"سوق أهراس"},{code:"42",name:"Tipaza",nameAr:"تيبازة"},{code:"43",name:"Mila",nameAr:"ميلة"},{code:"44",name:"A\xefn Defla",nameAr:"عين الدفلى"},{code:"45",name:"Na\xe2ma",nameAr:"النعامة"},{code:"46",name:"A\xefn T\xe9mouchent",nameAr:"عين تموشنت"},{code:"47",name:"Gharda\xefa",nameAr:"غرداية"},{code:"48",name:"Relizane",nameAr:"غليزان"}];var j=s(1657),N=s(5925),v=()=>{var e,a,s,v,f,g,b;let y=(0,n.useRouter)(),{state:A,clearCart:w}=(0,u.useCart)(),[k,q]=(0,l.useState)(!1),{register:T,handleSubmit:z,formState:{errors:C},watch:E}=(0,d.cI)(),S=A.total>=5e3?0:500,B=A.total+S,L=async e=>{if(0===A.items.length){N.default.error("Votre panier est vide");return}q(!0);try{let a={...e,items:A.items.filter(e=>e.product).map(e=>({product:e.product._id,quantity:e.quantity,selectedSize:e.selectedSize,selectedColor:e.selectedColor,price:e.product.price})),subtotal:A.total,shipping:S,total:B},s=await h.kn.create(a);w(),y.push("/commande/".concat(s._id)),N.default.success("Commande pass\xe9e avec succ\xe8s!")}catch(e){console.error("Erreur lors de la commande:",e),N.default.error("Erreur lors de la commande. Veuillez r\xe9essayer.")}finally{q(!1)}};return 0===A.items.length?(0,r.jsxs)("div",{className:"min-h-screen bg-dark-950",children:[(0,r.jsx)(o.Z,{}),(0,r.jsx)("main",{className:"pt-16",children:(0,r.jsx)("div",{className:"container-custom section-padding py-12 text-center",children:(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[(0,r.jsx)("div",{className:"w-24 h-24 bg-dark-800 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,r.jsx)(t.Z,{size:48,className:"text-dark-400"})}),(0,r.jsx)("h1",{className:"text-2xl font-bold text-white mb-4",children:"Votre panier est vide"}),(0,r.jsx)("p",{className:"text-dark-300 mb-6",children:"Ajoutez des produits \xe0 votre panier avant de passer commande."}),(0,r.jsx)("button",{onClick:()=>y.push("/catalogue"),className:"btn-primary",children:"Voir le catalogue"})]})})}),(0,r.jsx)(x.Z,{})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-dark-950",children:[(0,r.jsx)(o.Z,{}),(0,r.jsx)("main",{className:"pt-16",children:(0,r.jsx)("div",{className:"container-custom section-padding py-12",children:(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Finaliser votre commande"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,r.jsx)(i.E.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"space-y-8",children:(0,r.jsxs)("form",{onSubmit:z(L),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[(0,r.jsx)(c.Z,{className:"mr-2",size:20}),"Informations personnelles"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Pr\xe9nom *"}),(0,r.jsx)("input",{...T("customer.firstName",{required:"Le pr\xe9nom est requis"}),className:"input-field",placeholder:"Votre pr\xe9nom"}),(null===(e=C.customer)||void 0===e?void 0:e.firstName)&&(0,r.jsx)("p",{className:"form-error",children:C.customer.firstName.message})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Nom *"}),(0,r.jsx)("input",{...T("customer.lastName",{required:"Le nom est requis"}),className:"input-field",placeholder:"Votre nom"}),(null===(a=C.customer)||void 0===a?void 0:a.lastName)&&(0,r.jsx)("p",{className:"form-error",children:C.customer.lastName.message})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"T\xe9l\xe9phone *"}),(0,r.jsx)("input",{...T("customer.phone",{required:"Le t\xe9l\xe9phone est requis",pattern:{value:/^(\+213|0)[5-7][0-9]{8}$/,message:"Num\xe9ro de t\xe9l\xe9phone alg\xe9rien invalide"}}),className:"input-field",placeholder:"0555123456"}),(null===(s=C.customer)||void 0===s?void 0:s.phone)&&(0,r.jsx)("p",{className:"form-error",children:C.customer.phone.message})]})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[(0,r.jsx)(m.Z,{className:"mr-2",size:20}),"Adresse de livraison"]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Adresse compl\xe8te *"}),(0,r.jsx)("input",{...T("delivery.address",{required:"L'adresse est requise"}),className:"input-field",placeholder:"Rue, quartier, num\xe9ro..."}),(null===(v=C.delivery)||void 0===v?void 0:v.address)&&(0,r.jsx)("p",{className:"form-error",children:C.delivery.address.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Ville *"}),(0,r.jsx)("input",{...T("delivery.city",{required:"La ville est requise"}),className:"input-field",placeholder:"Votre ville"}),(null===(f=C.delivery)||void 0===f?void 0:f.city)&&(0,r.jsx)("p",{className:"form-error",children:C.delivery.city.message})]}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Wilaya *"}),(0,r.jsxs)("select",{...T("delivery.wilaya",{required:"La wilaya est requise"}),className:"input-field",children:[(0,r.jsx)("option",{value:"",children:"S\xe9lectionner une wilaya"}),p.map(e=>(0,r.jsx)("option",{value:e.name,children:e.name},e.code))]}),(null===(g=C.delivery)||void 0===g?void 0:g.wilaya)&&(0,r.jsx)("p",{className:"form-error",children:C.delivery.wilaya.message})]})]}),(0,r.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Code postal *"}),(0,r.jsx)("input",{...T("delivery.postalCode",{required:"Le code postal est requis",pattern:{value:/^\d{5}$/,message:"Code postal invalide (5 chiffres)"}}),className:"input-field",placeholder:"16000"}),(null===(b=C.delivery)||void 0===b?void 0:b.postalCode)&&(0,r.jsx)("p",{className:"form-error",children:C.delivery.postalCode.message})]})}),(0,r.jsxs)("div",{className:"form-group",children:[(0,r.jsx)("label",{className:"form-label",children:"Notes de livraison (optionnel)"}),(0,r.jsx)("textarea",{...T("delivery.notes"),className:"input-field h-24 resize-none",placeholder:"Instructions sp\xe9ciales pour la livraison..."})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[(0,r.jsx)(t.Z,{className:"mr-2",size:20}),"Paiement"]}),(0,r.jsxs)("div",{className:"bg-dark-800 rounded-lg p-4",children:[(0,r.jsxs)("p",{className:"text-dark-300 text-sm mb-2",children:[(0,r.jsx)("strong",{children:"Mode de paiement :"})," Paiement \xe0 la livraison"]}),(0,r.jsx)("p",{className:"text-dark-300 text-sm",children:"Vous paierez votre commande en esp\xe8ces lors de la livraison. Le livreur vous remettra un re\xe7u."})]})]}),(0,r.jsx)(i.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:k,className:"w-full btn-primary text-lg py-4 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"Traitement...":"Confirmer la commande"})]})}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h2",{className:"text-xl font-semibold text-white mb-6",children:"R\xe9sum\xe9 de la commande"}),(0,r.jsx)("div",{className:"space-y-4 mb-6",children:A.items.filter(e=>e.product).map((e,a)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-dark-800 rounded-lg",children:[(0,r.jsx)("div",{className:"w-16 h-16 bg-dark-700 rounded-lg overflow-hidden flex-shrink-0",children:e.product.images[0]?(0,r.jsx)("img",{src:e.product.images[0],alt:e.product.name,className:"w-full h-full object-cover"}):(0,r.jsx)("div",{className:"w-full h-full flex items-center justify-center text-dark-400",children:(0,r.jsx)(t.Z,{size:24})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("h4",{className:"text-white font-medium truncate",children:e.product.name}),(0,r.jsxs)("p",{className:"text-dark-400 text-sm",children:[e.selectedSize," • ",e.selectedColor]}),(0,r.jsxs)("p",{className:"text-dark-400 text-sm",children:["Quantit\xe9: ",e.quantity]})]}),(0,r.jsx)("div",{className:"text-right",children:(0,r.jsx)("p",{className:"text-white font-semibold",children:(0,j.T4)(e.product.price*e.quantity)})})]},a))}),(0,r.jsxs)("div",{className:"space-y-3 border-t border-dark-700 pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-dark-300",children:"Sous-total"}),(0,r.jsx)("span",{className:"text-white",children:(0,j.T4)(A.total)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsx)("span",{className:"text-dark-300",children:"Livraison"}),(0,r.jsx)("span",{className:"text-white",children:0===S?"Gratuite":(0,j.T4)(S)})]}),0===S&&(0,r.jsx)("p",{className:"text-green-400 text-sm",children:"✓ Livraison gratuite pour les commandes de plus de 5000 DA"}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-semibold border-t border-dark-700 pt-3",children:[(0,r.jsx)("span",{className:"text-white",children:"Total"}),(0,r.jsx)("span",{className:"text-white",children:(0,j.T4)(B)})]})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-white mb-4",children:"Informations importantes"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm text-dark-300",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mt-2 flex-shrink-0"}),(0,r.jsx)("p",{children:"Votre commande sera trait\xe9e dans les 24h"})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mt-2 flex-shrink-0"}),(0,r.jsx)("p",{children:"Livraison gratuite pour les commandes de plus de 5000 DA"})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mt-2 flex-shrink-0"}),(0,r.jsx)("p",{children:"D\xe9lai de livraison: 2-5 jours ouvr\xe9s"})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,r.jsx)("div",{className:"w-2 h-2 bg-white rounded-full mt-2 flex-shrink-0"}),(0,r.jsx)("p",{children:"Paiement \xe0 la livraison uniquement"})]})]})]})]})]})]})})}),(0,r.jsx)(x.Z,{})]})}}},function(e){e.O(0,[581,829,7,561,995,806,971,938,744],function(){return e(e.s=4423)}),_N_E=e.O()}]);