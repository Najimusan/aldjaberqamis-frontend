(()=>{var e={};e.id=64,e.ids=[64],e.modules={7849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},7807:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>d,routeModule:()=>x,tree:()=>c});var s=a(482),r=a(9108),i=a(2563),l=a.n(i),n=a(8300),o={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>n[e]);a.d(t,o);let c=["",{children:["admin",{children:["produits",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3829)),"C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\admin\\produits\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,6294)),"C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(a.bind(a,6833)),"C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9361,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\admin\\produits\\page.tsx"],m="/admin/produits/page",u={require:a,loadChunk:()=>Promise.resolve()},x=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/produits/page",pathname:"/admin/produits",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},7353:(e,t,a)=>{Promise.resolve().then(a.bind(a,386))},4720:(e,t,a)=>{Promise.resolve().then(a.bind(a,8941))},386:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(5344),r=a(3729),i=a(2254),l=a(783),n=a.n(l),o=a(7916);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let c=(0,a(9224).Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var d=a(1917),m=a(2401),u=a(9895),x=a(4513),h=a(8200),p=a(8120),g=a(4669);let y=({children:e})=>{let[t,a]=(0,r.useState)(!1),[l,y]=(0,r.useState)(!0),[f,b]=(0,r.useState)(!1),j=(0,i.useRouter)(),v=(0,i.usePathname)(),[w,N]=(0,r.useState)(""),[k,C]=(0,r.useState)(!0),q=[{name:"Tableau de bord",href:"/admin/dashboard",icon:c,roles:["super_admin","admin","manager"]},{name:"Produits",href:"/admin/produits",icon:d.Z,roles:["super_admin","admin"]},{name:"Commandes",href:"/admin/commandes",icon:m.Z,roles:["super_admin","admin","manager"]},{name:"Utilisateurs",href:"/admin/utilisateurs",icon:u.Z,roles:["super_admin"]}];return((0,r.useEffect)(()=>{if("/admin/login"===v){y(!1);return}(async()=>{let e=localStorage.getItem("adminToken");if(!e){j.push("/admin/login");return}try{let t=await fetch("http://localhost:5000/api/auth/verify",{headers:{Authorization:`Bearer ${e}`}});if(t.ok){let e=await t.json();console.log("Layout - Donn\xe9es utilisateur:",e),N(e.data.user.role),a(!0)}else localStorage.removeItem("adminToken"),j.push("/admin/login")}catch(e){localStorage.removeItem("adminToken"),j.push("/admin/login")}finally{y(!1),C(!1)}})()},[j,v]),"/admin/login"===v)?s.jsx(s.Fragment,{children:e}):l?s.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:s.jsx("div",{className:"text-white text-xl",children:"Chargement..."})}):t?(0,s.jsxs)("div",{className:"min-h-screen bg-black",children:[s.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:s.jsx(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>b(!f),className:"p-2 bg-gray-800 text-white rounded-lg",children:f?s.jsx(x.Z,{className:"w-6 h-6"}):s.jsx(h.Z,{className:"w-6 h-6"})})}),s.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-gray-900 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${f?"translate-x-0":"-translate-x-full"}`,children:(0,s.jsxs)("div",{className:"flex flex-col h-full",children:[s.jsx("div",{className:"flex items-center justify-center h-16 px-4 border-b border-gray-700",children:s.jsx("h1",{className:"text-xl font-bold text-white",children:"Al Djaber Qamis"})}),s.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:k?s.jsx("div",{className:"text-center text-gray-400",children:"Chargement..."}):q.filter(e=>!w||e.roles.includes(w)).map(e=>{let t=v===e.href;return(0,s.jsxs)(n(),{href:e.href,onClick:()=>{console.log("Navigation vers:",e.href),b(!1)},className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${t?"bg-white text-black":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[s.jsx(e.icon,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),s.jsx("div",{className:"p-4 border-t border-gray-700",children:(0,s.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{localStorage.removeItem("adminToken"),j.push("/admin/login")},className:"flex items-center w-full px-4 py-3 text-sm font-medium text-red-400 hover:bg-gray-700 rounded-lg transition-colors",children:[s.jsx(p.Z,{className:"w-5 h-5 mr-3"}),"D\xe9connexion"]})})]})}),f&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>b(!1)}),s.jsx("div",{className:"lg:ml-64",children:s.jsx("main",{className:"min-h-screen",children:e})}),s.jsx(g.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#fff",border:"1px solid #374151"}}})]}):null}},8941:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(5344),r=a(3729),i=a(2254),l=a(7916),n=a(3024),o=a(1917),c=a(1838),d=a(8765),m=a(3148),u=a(5695),x=a(8271),h=a(3644),p=a(9224);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let g=(0,p.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);var y=a(7060),f=a(4513);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let b=(0,p.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var j=a(4669);let v=({selectedImages:e,setSelectedImages:t,imagePreview:a,setImagePreview:i,maxImages:n=5,maxSizeInMB:o=5,acceptedTypes:c=["image/jpeg","image/jpg","image/png","image/webp"]})=>{let[d,m]=(0,r.useState)(!1),[u,x]=(0,r.useState)(!1),p=e=>c.includes(e.type)?!(e.size>1048576*o)||(j.default.error(`Fichier trop volumineux. Taille max: ${o}MB`),!1):(j.default.error(`Type de fichier non support\xe9: ${e.type}`),!1),v=(0,r.useCallback)(s=>{if(!s)return;let r=[],l=[];if(e.length+s.length>n){j.default.error(`Maximum ${n} images autoris\xe9es`);return}Array.from(s).forEach(e=>{if(p(e)){r.push(e);let t=URL.createObjectURL(e);l.push(t)}}),r.length>0&&(t([...e,...r]),i([...a,...l]),j.default.success(`${r.length} image(s) ajout\xe9e(s)`))},[e,a,n,o,c]),w=(0,r.useCallback)(e=>{e.preventDefault(),m(!0)},[]),N=(0,r.useCallback)(e=>{e.preventDefault(),m(!1)},[]),k=(0,r.useCallback)(e=>{e.preventDefault(),m(!1),v(e.dataTransfer.files)},[v]),C=s=>{let r=e.filter((e,t)=>t!==s),l=a.filter((e,t)=>t!==s);URL.revokeObjectURL(a[s]),t(r),i(l),j.default.success("Image supprim\xe9e")};return(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)(l.E.div,{className:`
          relative border-2 border-dashed rounded-xl p-8 text-center transition-all duration-300
          ${d?"border-blue-400 bg-blue-50/10":"border-gray-600 hover:border-gray-500"}
          ${e.length>=n?"opacity-50 cursor-not-allowed":"cursor-pointer"}
        `,onDragOver:w,onDragLeave:N,onDrop:k,onClick:()=>{e.length<n&&document.getElementById("file-input")?.click()},whileHover:{scale:e.length>=n?1:1.02},whileTap:{scale:e.length>=n?1:.98},children:[s.jsx("input",{id:"file-input",type:"file",multiple:!0,accept:c.join(","),onChange:e=>v(e.target.files),className:"hidden",disabled:e.length>=n}),(0,s.jsxs)(l.E.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"space-y-4",children:[s.jsx("div",{className:"mx-auto w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center",children:s.jsx(g,{className:"w-8 h-8 text-gray-400"})}),(0,s.jsxs)("div",{children:[s.jsx("h3",{className:"text-lg font-semibold text-white mb-2",children:e.length>=n?"Maximum atteint":"Glissez vos images ici"}),s.jsx("p",{className:"text-gray-400 text-sm",children:"ou cliquez pour s\xe9lectionner des fichiers"}),(0,s.jsxs)("p",{className:"text-gray-500 text-xs mt-2",children:[e.length,"/",n," images • Max ",o,"MB par image"]})]}),e.length>0&&(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"flex items-center justify-center space-x-2 text-green-400",children:[s.jsx(y.Z,{className:"w-5 h-5"}),(0,s.jsxs)("span",{className:"text-sm font-medium",children:[e.length," image(s) s\xe9lectionn\xe9e(s)"]})]})]})]}),s.jsx(h.M,{children:a.length>0&&s.jsx(l.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:a.map((t,a)=>(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},className:"relative group",children:[(0,s.jsxs)("div",{className:"aspect-square bg-gray-800 rounded-lg overflow-hidden border border-gray-700",children:[s.jsx("img",{src:t,alt:`Preview ${a+1}`,className:"w-full h-full object-cover"}),s.jsx(l.E.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:s.jsx(l.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>C(a),className:"p-2 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",children:s.jsx(f.Z,{className:"w-4 h-4"})})})]}),(0,s.jsxs)("div",{className:"mt-2 flex items-center justify-between text-xs",children:[s.jsx("span",{className:"text-gray-400 truncate",children:e[a]?.name||`Image ${a+1}`}),(0,s.jsxs)("div",{className:"flex items-center space-x-1 text-green-400",children:[s.jsx(y.Z,{className:"w-3 h-3"}),s.jsx("span",{children:"Pr\xeat"})]})]})]},a))})}),s.jsx("div",{className:"bg-gray-800 rounded-lg p-4",children:(0,s.jsxs)("div",{className:"flex items-start space-x-3",children:[s.jsx(b,{className:"w-5 h-5 text-blue-400 mt-0.5 flex-shrink-0"}),(0,s.jsxs)("div",{className:"text-sm text-gray-300",children:[s.jsx("p",{className:"font-medium mb-2",children:"Formats accept\xe9s :"}),(0,s.jsxs)("ul",{className:"space-y-1 text-gray-400",children:[s.jsx("li",{children:"• JPG, JPEG, PNG, WebP"}),(0,s.jsxs)("li",{children:["• Taille maximale : ",o,"MB par image"]}),(0,s.jsxs)("li",{children:["• Maximum : ",n," images par produit"]}),s.jsx("li",{children:"• R\xe9solution recommand\xe9e : 800x800px minimum"})]})]})]})})]})};var w=a(8168),N=a(1532),k=a(7751),C=a(1223),q=a.n(C);let E=({images:e,productName:t,className:a=""})=>{let[i,n]=(0,r.useState)(null),[o,c]=(0,r.useState)(0);if(!e||0===e.length)return s.jsx("div",{className:`bg-gray-800 rounded-lg flex items-center justify-center ${a}`,children:(0,s.jsxs)("div",{className:"text-center text-gray-400",children:[s.jsx("div",{className:"w-16 h-16 bg-gray-700 rounded-full flex items-center justify-center mx-auto mb-2",children:s.jsx(w.Z,{className:"w-8 h-8"})}),s.jsx("p",{className:"text-sm",children:"Aucune image disponible"})]})});let d=e=>{n(e),c(e)},m=()=>{n(null)};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:`space-y-4 ${a}`,children:[s.jsx("div",{className:"relative group",children:(0,s.jsxs)(l.E.div,{whileHover:{scale:1.02},className:"relative aspect-square bg-gray-800 rounded-lg overflow-hidden cursor-pointer",onClick:()=>d(0),children:[s.jsx(q(),{src:e[0],alt:t,fill:!0,className:"object-cover group-hover:scale-105 transition-transform duration-300"}),s.jsx(l.E.div,{initial:{opacity:0},whileHover:{opacity:1},className:"absolute inset-0 bg-black/50 flex items-center justify-center",children:s.jsx(w.Z,{className:"w-8 h-8 text-white"})}),e.length>1&&(0,s.jsxs)("div",{className:"absolute top-3 right-3 bg-black/70 text-white text-xs px-2 py-1 rounded-full",children:["+",e.length-1]})]})}),e.length>1&&s.jsx("div",{className:"grid grid-cols-4 gap-2",children:e.slice(1,5).map((a,r)=>(0,s.jsxs)(l.E.div,{whileHover:{scale:1.05},className:"relative aspect-square bg-gray-800 rounded-lg overflow-hidden cursor-pointer",onClick:()=>d(r+1),children:[s.jsx(q(),{src:a,alt:`${t} ${r+2}`,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300"}),3===r&&e.length>5&&s.jsx("div",{className:"absolute inset-0 bg-black/70 flex items-center justify-center",children:(0,s.jsxs)("span",{className:"text-white text-xs font-medium",children:["+",e.length-5]})})]},r+1))})]}),s.jsx(h.M,{children:null!==i&&s.jsx(l.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/90 z-50 flex items-center justify-center p-4",onClick:m,children:(0,s.jsxs)(l.E.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.8,opacity:0},className:"relative max-w-4xl max-h-full",onClick:e=>e.stopPropagation(),children:[s.jsx("button",{onClick:m,className:"absolute -top-12 right-0 text-white hover:text-gray-300 transition-colors",children:s.jsx(f.Z,{className:"w-8 h-8"})}),(0,s.jsxs)("div",{className:"relative",children:[s.jsx(q(),{src:e[o],alt:`${t} ${o+1}`,width:800,height:600,className:"max-w-full max-h-[80vh] object-contain rounded-lg"}),e.length>1&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("button",{onClick:()=>{c(t=>(t-1+e.length)%e.length)},className:"absolute left-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:s.jsx(N.Z,{className:"w-6 h-6"})}),s.jsx("button",{onClick:()=>{c(t=>(t+1)%e.length)},className:"absolute right-4 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70 transition-colors",children:s.jsx(k.Z,{className:"w-6 h-6"})})]})]}),e.length>1&&s.jsx("div",{className:"text-center mt-4 text-white",children:(0,s.jsxs)("span",{className:"text-sm",children:[o+1," / ",e.length]})}),e.length>1&&s.jsx("div",{className:"flex justify-center space-x-2 mt-4",children:e.map((e,a)=>s.jsx("button",{onClick:()=>c(a),className:`w-16 h-16 rounded-lg overflow-hidden border-2 transition-all ${a===o?"border-white":"border-transparent hover:border-gray-400"}`,children:s.jsx(q(),{src:e,alt:`${t} ${a+1}`,width:64,height:64,className:"w-full h-full object-cover"})},a))})]})})})]})},Z=e=>Array.isArray(e)?e.map(e=>"string"==typeof e?{name:e,hex:"#000000"}:e&&"object"==typeof e&&e.name&&e.hex?{name:String(e.name),hex:String(e.hex)}:{name:"Couleur inconnue",hex:"#000000"}):[],S=()=>{let[e,t]=(0,r.useState)([]),[a,h]=(0,r.useState)(!0),[p,g]=(0,r.useState)(""),[y,f]=(0,r.useState)(""),[b,w]=(0,r.useState)(1),[N,k]=(0,r.useState)(1),[C,q]=(0,r.useState)(null),[S,P]=(0,r.useState)(!1),[z,$]=(0,r.useState)(null),[M,T]=(0,r.useState)([]),[A,D]=(0,r.useState)([]),[_,L]=(0,r.useState)(!1),U=(0,i.useRouter)(),[F,H]=(0,r.useState)({name:"",description:"",price:0,category:"qamis",sizes:["M","L","XL"],colors:[],stock:0,features:{material:"",care:"",origin:"Alg\xe9rie"},tags:[]}),I=[{value:"qamis",label:"Qamis"},{value:"hidjab",label:"Hidjab"},{value:"parfum",label:"Parfum"},{value:"pantalon",label:"Pantalon"},{value:"jabador",label:"Jabador"},{value:"accessoires",label:"Accessoires"}];(0,r.useEffect)(()=>{let e=localStorage.getItem("adminToken");if(!e){U.push("/admin/login");return}fetch("http://localhost:5000/api/auth/verify",{headers:{Authorization:`Bearer ${e}`}}).then(e=>e.json()).then(t=>{if(!["super_admin","admin"].includes(t.data.user.role)){U.push("/admin/dashboard");return}q(e)}).catch(()=>{localStorage.removeItem("adminToken"),U.push("/admin/login")})},[U]),(0,r.useEffect)(()=>{C&&B()},[C,p,y,b]);let B=async()=>{if(C)try{h(!0);let e=new URLSearchParams({page:b.toString(),limit:"10"});p&&e.append("search",p),y&&e.append("category",y);let a=await fetch(`http://localhost:5000/api/products?${e}`,{headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}});if(a.ok){let e=await a.json(),s=(e.data||[]).map(e=>({...e,colors:Z(e.colors)}));t(s),k(e.pagination?.totalPages||1)}else console.error("Erreur lors du chargement des produits"),t([])}catch(e){console.error("Erreur lors du chargement des produits:",e),t([])}finally{h(!1)}},R=async e=>{if(C&&confirm("\xcates-vous s\xfbr de vouloir supprimer ce produit ?"))try{(await fetch(`http://localhost:5000/api/products/${e}`,{method:"DELETE",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"}})).ok&&B()}catch(e){console.error("Erreur lors de la suppression:",e)}},O=async(e,t)=>{if(C)try{(await fetch(`http://localhost:5000/api/products/${e}`,{method:"PUT",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({isActive:!t})})).ok&&B()}catch(e){console.error("Erreur lors du changement de statut:",e)}},G=e=>new Intl.NumberFormat("fr-DZ",{style:"currency",currency:"DZD"}).format(e),X=e=>{let t=I.find(t=>t.value===e);return t?.label||e},J=e=>{H(t=>({...t,colors:t.colors.some(t=>t.hex===e.hex)?t.colors.filter(t=>t.hex!==e.hex):[...t.colors,e]}))},V=e=>{H(t=>({...t,colors:t.colors.filter(t=>t.hex!==e)}))},Q=async e=>{if(0===e.length)return[];L(!0);try{let t=new FormData;e.forEach(e=>{t.append("images",e)});let a=await fetch("http://localhost:5000/api/upload/images",{method:"POST",headers:{Authorization:`Bearer ${C}`},body:t});if(a.ok){let e=await a.json();return j.default.success(`${e.data.images.length} image(s) upload\xe9e(s) avec succ\xe8s`),e.data.images}throw Error("Erreur lors de l'upload des images")}catch(e){return console.error("Erreur upload:",e),j.default.error("Erreur lors de l'upload des images"),[]}finally{L(!1)}},W=()=>{A.forEach(e=>URL.revokeObjectURL(e)),T([]),D([])},K=async e=>{if(e.preventDefault(),C)try{let e=[];e=M.length>0?await Q(M):["https://via.placeholder.com/400x400/ffffff/000000?text="+encodeURIComponent(F.name)];let t=await fetch("http://localhost:5000/api/products",{method:"POST",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({...F,images:e})});if(t.ok)P(!1),H({name:"",description:"",price:0,category:"qamis",sizes:["M","L","XL"],colors:[],stock:0,features:{material:"",care:"",origin:"Alg\xe9rie"},tags:[]}),W(),B(),j.default.success("Produit cr\xe9\xe9 avec succ\xe8s !");else{let e=await t.json();j.default.error(e.message||"Erreur lors de la cr\xe9ation")}}catch(e){console.error("Erreur lors de la cr\xe9ation:",e),e instanceof Error?j.default.error("Erreur lors de la cr\xe9ation: "+e.message):j.default.error("Erreur lors de la cr\xe9ation: une erreur inconnue est survenue")}},Y=async e=>{if(e.preventDefault(),z&&C)try{let e=z.images;M.length>0&&(e=await Q(M));let t=await fetch(`http://localhost:5000/api/products/${z._id}`,{method:"PUT",headers:{Authorization:`Bearer ${C}`,"Content-Type":"application/json"},body:JSON.stringify({...F,images:e})});if(t.ok)$(null),H({name:"",description:"",price:0,category:"qamis",sizes:["M","L","XL"],colors:[],stock:0,features:{material:"",care:"",origin:"Alg\xe9rie"},tags:[]}),B(),alert("Produit modifi\xe9 avec succ\xe8s !");else{let e=await t.json();alert(e.message||"Erreur lors de la modification")}}catch(e){console.error("Erreur lors de la modification:",e),alert("Erreur lors de la modification")}},ee=e=>{$(e);let t=Z(e.colors);H({name:e.name,description:e.description,price:e.price,category:e.category,sizes:e.sizes,colors:t,stock:e.stock,features:{material:e.features?.material||"",care:e.features?.care||"",origin:e.features?.origin||"Alg\xe9rie"},tags:e.tags||[]})},et=e=>{H(t=>({...t,sizes:t.sizes.includes(e)?t.sizes.filter(t=>t!==e):[...t.sizes,e]}))};return C?(0,s.jsxs)("div",{className:"p-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[s.jsx("div",{className:"flex items-center space-x-3",children:(0,s.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>U.push("/admin/dashboard"),className:"flex items-center space-x-2 text-gray-300 hover:text-white transition-colors",children:[s.jsx(n.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Retour au Dashboard"})]})}),(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[s.jsx(o.Z,{className:"w-8 h-8 text-white"}),s.jsx("h1",{className:"text-2xl font-bold text-white",children:"Gestion des Produits"})]}),(0,s.jsxs)(l.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>P(!0),className:"flex items-center space-x-2 bg-white text-black px-4 py-2 rounded-lg hover:bg-gray-200 transition-colors",children:[s.jsx(c.Z,{className:"w-5 h-5"}),s.jsx("span",{children:"Nouveau Produit"})]})]}),(0,s.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 mb-6",children:[(0,s.jsxs)("div",{className:"relative flex-1",children:[s.jsx(d.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5"}),s.jsx("input",{type:"text",placeholder:"Rechercher un produit...",value:p,onChange:e=>g(e.target.value),className:"w-full pl-10 pr-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent"})]}),(0,s.jsxs)("select",{value:y,onChange:e=>f(e.target.value),className:"px-4 py-2 bg-gray-800 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white focus:border-transparent",children:[s.jsx("option",{value:"",children:"Toutes les cat\xe9gories"}),I.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))]})]}),s.jsx("div",{className:"bg-gray-800 rounded-lg overflow-hidden",children:a?s.jsx("div",{className:"p-8 text-center text-gray-400",children:"Chargement des produits..."}):s.jsx("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[s.jsx("thead",{className:"bg-gray-700",children:(0,s.jsxs)("tr",{children:[s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Produit"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Cat\xe9gorie"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Prix"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Stock"}),s.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Statut"}),s.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-300 uppercase tracking-wider",children:"Actions"})]})}),s.jsx("tbody",{className:"divide-y divide-gray-700",children:e.map(e=>(0,s.jsxs)(l.E.tr,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"hover:bg-gray-700 transition-colors",children:[s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,s.jsxs)("div",{className:"flex items-center",children:[s.jsx("div",{className:"flex-shrink-0 h-16 w-16",children:s.jsx(E,{images:e.images,productName:e.name,className:"h-16 w-16"})}),(0,s.jsxs)("div",{className:"ml-4",children:[s.jsx("div",{className:"text-sm font-medium text-white",children:e.name}),s.jsx("div",{className:"text-sm text-gray-400 truncate max-w-xs",children:e.description}),(0,s.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:[e.images.length," image(s)"]})]})]})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-600 text-white",children:X(e.category)})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:G(e.price)}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-white",children:e.stock}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:s.jsx("button",{onClick:()=>O(e._id,e.isActive),className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${e.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:e.isActive?"Actif":"Inactif"})}),s.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:(0,s.jsxs)("div",{className:"flex items-center justify-end space-x-2",children:[s.jsx(l.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},className:"text-blue-400 hover:text-blue-300",children:s.jsx(m.Z,{className:"w-4 h-4"})}),s.jsx(l.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>ee(e),className:"text-green-400 hover:text-green-300",children:s.jsx(u.Z,{className:"w-4 h-4"})}),s.jsx(l.E.button,{whileHover:{scale:1.1},whileTap:{scale:.9},onClick:()=>R(e._id),className:"text-red-400 hover:text-red-300",children:s.jsx(x.Z,{className:"w-4 h-4"})})]})})]},e._id))})]})})}),N>1&&(0,s.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-6",children:[s.jsx("button",{onClick:()=>w(e=>Math.max(e-1,1)),disabled:1===b,className:"px-3 py-2 bg-gray-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-600",children:"Pr\xe9c\xe9dent"}),(0,s.jsxs)("span",{className:"px-4 py-2 text-white",children:["Page ",b," sur ",N]}),s.jsx("button",{onClick:()=>w(e=>Math.min(e+1,N)),disabled:b===N,className:"px-3 py-2 bg-gray-700 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-600",children:"Suivant"})]}),(S||z)&&s.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,s.jsxs)(l.E.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-gray-800 p-6 rounded-lg w-full max-w-2xl mx-4 max-h-[90vh] overflow-y-auto",children:[s.jsx("h2",{className:"text-xl font-bold text-white mb-4",children:z?"Modifier le produit":"Nouveau produit"}),(0,s.jsxs)("form",{onSubmit:z?Y:K,children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Nom du produit"}),s.jsx("input",{type:"text",value:F.name,onChange:e=>H({...F,name:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white",required:!0})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Description"}),s.jsx("textarea",{value:F.description,onChange:e=>H({...F,description:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white",rows:3,required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Prix (DZD)"}),s.jsx("input",{type:"number",value:F.price,onChange:e=>H({...F,price:Number(e.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white",required:!0})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Stock"}),s.jsx("input",{type:"number",value:F.stock,onChange:e=>H({...F,stock:Number(e.target.value)}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white",required:!0})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Cat\xe9gorie"}),s.jsx("select",{value:F.category,onChange:e=>H({...F,category:e.target.value}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-blue-500",children:I.map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Tailles disponibles"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:["XS","S","M","L","XL","XXL"].map(e=>s.jsx("button",{type:"button",onClick:()=>et(e),className:`px-3 py-2 rounded-lg border-2 transition-all ${F.sizes.includes(e)?"bg-white text-black border-white":"bg-gray-700 text-white border-gray-600 hover:border-gray-400"}`,children:e},e))})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Couleurs disponibles"}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Couleurs pr\xe9d\xe9finies :"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:[{name:"Blanc",hex:"#FFFFFF"},{name:"Noir",hex:"#000000"},{name:"Beige",hex:"#F5F5DC"},{name:"Marron",hex:"#8B4513"},{name:"Gris",hex:"#808080"},{name:"Bleu",hex:"#0000FF"},{name:"Vert",hex:"#008000"},{name:"Rouge",hex:"#FF0000"}].map(e=>(0,s.jsxs)("button",{type:"button",onClick:()=>J(e),className:`flex items-center gap-2 px-3 py-2 rounded-lg border-2 transition-all ${F.colors.some(t=>t.hex===e.hex)?"bg-white text-black border-white":"bg-gray-700 text-white border-gray-600 hover:border-gray-400"}`,children:[s.jsx("div",{className:"w-4 h-4 rounded-full border border-gray-300",style:{backgroundColor:e.hex}}),e.name]},e.hex))})]}),F.colors.length>0&&(0,s.jsxs)("div",{children:[s.jsx("p",{className:"text-sm text-gray-400 mb-2",children:"Couleurs s\xe9lectionn\xe9es :"}),s.jsx("div",{className:"flex flex-wrap gap-2",children:F.colors.map((e,t)=>(0,s.jsxs)("div",{className:"flex items-center gap-2 px-3 py-2 bg-blue-600 text-white rounded-lg",children:[s.jsx("div",{className:"w-4 h-4 rounded-full border border-white",style:{backgroundColor:e?.hex||"#000000"}}),e?.name||"Couleur inconnue",s.jsx("button",{type:"button",onClick:()=>V(e?.hex||""),className:"text-red-300 hover:text-red-100",children:"\xd7"})]},e?.hex||t))})]})]})]}),(0,s.jsxs)("div",{className:"md:col-span-2",children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Images du produit"}),s.jsx(v,{selectedImages:M,setSelectedImages:T,imagePreview:A,setImagePreview:D,maxImages:5,maxSizeInMB:5,acceptedTypes:["image/jpeg","image/jpg","image/png","image/webp"]})]}),(0,s.jsxs)("div",{children:[s.jsx("label",{className:"block text-sm font-medium text-gray-300 mb-2",children:"Mat\xe9riau"}),s.jsx("input",{type:"text",value:F.features.material,onChange:e=>H({...F,features:{...F.features,material:e.target.value}}),className:"w-full px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white"})]})]}),(0,s.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[s.jsx("button",{type:"button",onClick:()=>{P(!1),$(null),H({name:"",description:"",price:0,category:"qamis",sizes:["M","L","XL"],colors:[],stock:0,features:{material:"",care:"",origin:"Alg\xe9rie"},tags:[]})},className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-500",children:"Annuler"}),s.jsx("button",{type:"submit",disabled:_,className:`px-4 py-2 rounded-lg transition-all ${_?"bg-gray-500 text-gray-300 cursor-not-allowed":"bg-white text-black hover:bg-gray-200"}`,children:_?(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx("div",{className:"w-4 h-4 border-2 border-gray-300 border-t-transparent rounded-full animate-spin"}),s.jsx("span",{children:"Upload en cours..."})]}):z?"Modifier":"Cr\xe9er"})]})]})]})})]}):null}},3024:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},7060:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},1532:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},7751:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},3148:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},8120:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},1917:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]])},5695:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},9895:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},8168:(e,t,a)=>{"use strict";a.d(t,{Z:()=>s});/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let s=(0,a(9224).Z)("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]])},2254:(e,t,a)=>{e.exports=a(4767)},6294:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let s=(0,a(6843).createProxy)(String.raw`C:\Users\nazim\Desktop\aldjaberqamis\aldjaberqamis-frontend\app\admin\layout.tsx`),{__esModule:r,$$typeof:i}=s,l=s.default},3829:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>i,__esModule:()=>r,default:()=>l});let s=(0,a(6843).createProxy)(String.raw`C:\Users\nazim\Desktop\aldjaberqamis\aldjaberqamis-frontend\app\admin\produits\page.tsx`),{__esModule:r,$$typeof:i}=s,l=s.default}};var t=require("../../../webpack-runtime.js");t.C(e);var a=e=>t(t.s=e),s=t.X(0,[992,544,680,889],()=>a(7807));module.exports=s})();