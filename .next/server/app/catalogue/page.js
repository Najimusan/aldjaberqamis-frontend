(()=>{var e={};e.id=567,e.ids=[567],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4778:(e,t,a)=>{"use strict";a.r(t),a.d(t,{GlobalError:()=>l.a,__next_app__:()=>g,originalPathname:()=>u,pages:()=>d,routeModule:()=>h,tree:()=>o});var s=a(7096),r=a(6132),i=a(7284),l=a.n(i),n=a(2564),c={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>n[e]);a.d(t,c);let o=["",{children:["catalogue",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,3512)),"C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\catalogue\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3304)),"C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\catalogue\\page.tsx"],u="/catalogue/page",g={require:a,loadChunk:()=>Promise.resolve()},h=new s.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/catalogue/page",pathname:"/catalogue",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},749:(e,t,a)=>{Promise.resolve().then(a.bind(a,7566))},7566:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var s=a(784),r=a(9885),i=a(4571),l=a(3406),n=a(2029),c=a(8200),o=a(3488),d=a(7114),u=a(2316),g=a(8863),h=a(828),x=a(9576),p=a(345);let __WEBPACK_DEFAULT_EXPORT__=()=>{let e=(0,d.useSearchParams)(),[t,a]=(0,r.useState)([]),[m,v]=(0,r.useState)(!0),[b,j]=(0,r.useState)({}),[f,y]=(0,r.useState)("newest"),[w,C]=(0,r.useState)("grid"),[P,N]=(0,r.useState)(!1),[_,D]=(0,r.useState)(""),[k,S]=(0,r.useState)([]),[A,q]=(0,r.useState)(!1),[E,F]=(0,r.useState)({page:1,totalPages:1,total:0}),fetchProducts=async(e=1,t=b,s=f)=>{try{v(!0),console.log("\uD83D\uDE80 fetchProducts called with:",{page:e,newFilters:t,newSort:s}),console.log("\uD83D\uDCCA Current filters state:",b);let r=await x.fi.getAll(t,e,12);console.log("✅ Products response:",r.data.length,"products"),a(r.data),F({page:r.page,totalPages:r.totalPages,total:r.total})}catch(e){console.error("❌ Erreur lors du chargement des produits:",e),p.default.error("Erreur lors du chargement des produits")}finally{v(!1)}},loadInitialData=async()=>{console.log("\uD83D\uDD04 Loading initial data..."),await loadCategories();let t=e.get("category"),a=e.get("search"),s=e.get("minPrice"),r=e.get("maxPrice");console.log("\uD83D\uDCCB URL params:",{categoryFromUrl:t,searchFromUrl:a,minPriceFromUrl:s,maxPriceFromUrl:r});let i={};t&&(i.category=t),a&&(i.search=a,D(a)),s&&(i.minPrice=parseFloat(s)),r&&(i.maxPrice=parseFloat(r)),console.log("\uD83C\uDFAF Setting filters:",i),j(i),q(!0),console.log("\uD83D\uDCE6 Fetching products with initial filters..."),fetchProducts(1,i,f)};(0,r.useEffect)(()=>{loadInitialData()},[]);let handleFiltersChange=e=>{console.log("\uD83C\uDF9B️ Manual filters change:",e),j(e),fetchProducts(1,e,f)},loadCategories=async()=>{let e=[{_id:"1",name:"Qamis",slug:"qamis",color:"#8B5CF6",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"2",name:"Hidjab",slug:"hidjab",color:"#EC4899",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"3",name:"Parfum",slug:"parfum",color:"#F59E0B",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"4",name:"Pantalon",slug:"pantalon",color:"#10B981",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"5",name:"Jabador",slug:"jabador",color:"#EF4444",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()},{_id:"6",name:"Accessoires",slug:"accessoires",color:"#6B7280",isActive:!0,createdAt:new Date().toISOString(),updatedAt:new Date().toISOString()}];S(e);try{let e=await x.Yc.getAll();e.length>0&&S(e)}catch(e){console.error("Erreur lors du chargement des cat\xe9gories:",e)}},T=(0,r.useRef)(null),handleSearchChange=e=>{D(e),T.current&&clearTimeout(T.current),T.current=setTimeout(()=>{e!==b.search&&(console.log("\uD83D\uDD0D Search debounced:",e),handleFilterChange("search",e))},500)},handleFilterChange=(e,t)=>{let a={...b,[e]:t||void 0};console.log("\uD83C\uDF9B️ Filter change:",{key:e,value:t,newFilters:a}),handleFiltersChange(a)},handleSortChange=e=>{y(e),fetchProducts(1,b,e)},handlePageChange=e=>{fetchProducts(e,b,f),window.scrollTo({top:0,behavior:"smooth"})},clearFilters=()=>{j({}),D(""),fetchProducts(1,{},f)};return(0,s.jsxs)("div",{className:"min-h-screen bg-dark-950",children:[s.jsx(u.Z,{}),(0,s.jsxs)("main",{className:"pt-16",children:[s.jsx("section",{className:"py-12 bg-dark-900",children:s.jsx("div",{className:"container-custom section-padding",children:(0,s.jsxs)(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.8},className:"text-center",children:[s.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:b.category?`Catalogue - ${b.category.charAt(0).toUpperCase()+b.category.slice(1)}`:"Notre Catalogue"}),s.jsx("p",{className:"text-dark-300 text-lg max-w-2xl mx-auto",children:b.category?`D\xe9couvrez notre collection de ${b.category} de qualit\xe9`:"D\xe9couvrez notre collection compl\xe8te de qamis et accessoires musulmans de qualit\xe9"})]})})}),s.jsx("section",{className:"py-6 bg-dark-800 border-b border-dark-700",children:(0,s.jsxs)("div",{className:"container-custom section-padding",children:[(0,s.jsxs)("div",{className:"flex flex-col gap-6",children:[s.jsx("div",{className:"md:hidden",children:(0,s.jsxs)(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>N(!P),className:"btn-secondary flex items-center space-x-2",children:[s.jsx(l.Z,{size:20}),s.jsx("span",{children:"Filtres"})]})}),(0,s.jsxs)("div",{className:"hidden md:flex flex-1 items-center space-x-4",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(n.Z,{size:20,className:"text-white"}),s.jsx("span",{className:"text-white font-medium",children:"Filtres:"})]}),(0,s.jsxs)("select",{value:b.category||"",onChange:e=>handleFilterChange("category",e.target.value),className:"input-field w-48",children:[s.jsx("option",{value:"",children:"Toutes les cat\xe9gories"}),k.length>0?k.map(e=>s.jsx("option",{value:e.name.toLowerCase(),children:e.name},e._id)):s.jsx("option",{disabled:!0,children:"Chargement des cat\xe9gories..."})]}),s.jsx("input",{type:"text",placeholder:"Rechercher...",value:_,onChange:e=>handleSearchChange(e.target.value),className:"input-field w-64"}),s.jsx("input",{type:"number",placeholder:"Prix min",value:b.minPrice||"",onChange:e=>handleFilterChange("minPrice",e.target.value),className:"input-field w-32"}),s.jsx("input",{type:"number",placeholder:"Prix max",value:b.maxPrice||"",onChange:e=>handleFilterChange("maxPrice",e.target.value),className:"input-field w-32"}),s.jsx("button",{onClick:clearFilters,className:"btn-ghost text-sm",children:"Effacer"})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4",children:[b.category&&(0,s.jsxs)("div",{className:"flex items-center space-x-2 bg-white/10 px-3 py-1 rounded-lg",children:[(0,s.jsxs)("span",{className:"text-white text-sm",children:["Cat\xe9gorie: ",s.jsx("span",{className:"font-semibold capitalize",children:b.category})]}),s.jsx("button",{onClick:()=>handleFilterChange("category",""),className:"text-white hover:text-red-400 transition-colors",children:"\xd7"})]}),s.jsx("select",{value:f,onChange:e=>handleSortChange(e.target.value),className:"input-field w-48",children:[{value:"newest",label:"Plus r\xe9cents"},{value:"oldest",label:"Plus anciens"},{value:"price_asc",label:"Prix croissant"},{value:"price_desc",label:"Prix d\xe9croissant"},{value:"name",label:"Nom A-Z"}].map(e=>s.jsx("option",{value:e.value,children:e.label},e.value))}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>C("grid"),className:`p-2 rounded-lg transition-all duration-300 ${"grid"===w?"bg-white text-dark-950":"bg-dark-700 text-white hover:bg-dark-600"}`,children:s.jsx(c.Z,{size:20})}),s.jsx(i.E.button,{whileHover:{scale:1.1},whileTap:{scale:.95},onClick:()=>C("list"),className:`p-2 rounded-lg transition-all duration-300 ${"list"===w?"bg-white text-dark-950":"bg-dark-700 text-white hover:bg-dark-600"}`,children:s.jsx(o.Z,{size:20})})]})]})]}),P&&(0,s.jsxs)(i.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"md:hidden mt-6 space-y-4",children:[(0,s.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,s.jsxs)("select",{value:b.category||"",onChange:e=>handleFilterChange("category",e.target.value),className:"input-field",children:[s.jsx("option",{value:"",children:"Toutes les cat\xe9gories"}),k.map(e=>s.jsx("option",{value:e.name.toLowerCase(),children:e.name},e._id))]}),s.jsx("input",{type:"text",placeholder:"Rechercher...",value:_,onChange:e=>handleSearchChange(e.target.value),className:"input-field"}),s.jsx("input",{type:"number",placeholder:"Prix min",value:b.minPrice||"",onChange:e=>handleFilterChange("minPrice",e.target.value),className:"input-field"}),s.jsx("input",{type:"number",placeholder:"Prix max",value:b.maxPrice||"",onChange:e=>handleFilterChange("maxPrice",e.target.value),className:"input-field"})]}),s.jsx("button",{onClick:clearFilters,className:"btn-secondary w-full",children:"Effacer tous les filtres"})]})]})}),s.jsx("section",{className:"py-8",children:(0,s.jsxs)("div",{className:"container-custom section-padding",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,s.jsxs)("p",{className:"text-dark-300",children:[E.total," produit",E.total>1?"s":""," trouv\xe9",E.total>1?"s":""]}),(0,s.jsxs)("p",{className:"text-dark-300",children:["Page ",E.page," sur ",E.totalPages]})]}),m?s.jsx("div",{className:`grid gap-6 ${"grid"===w?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:[...Array(8)].map((e,t)=>(0,s.jsxs)("div",{className:"bg-dark-800 rounded-xl p-6 animate-pulse",children:[s.jsx("div",{className:"w-full h-48 bg-dark-700 rounded-lg mb-4"}),s.jsx("div",{className:"h-4 bg-dark-700 rounded mb-2"}),s.jsx("div",{className:"h-4 bg-dark-700 rounded w-3/4 mb-4"}),s.jsx("div",{className:"h-6 bg-dark-700 rounded w-1/2"})]},t))}):0===t.length?(0,s.jsxs)("div",{className:"text-center py-12",children:[s.jsx("div",{className:"w-24 h-24 bg-dark-800 rounded-full flex items-center justify-center mx-auto mb-4",children:s.jsx(n.Z,{size:48,className:"text-dark-400"})}),s.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"Aucun produit trouv\xe9"}),s.jsx("p",{className:"text-dark-300 mb-6",children:"Essayez de modifier vos crit\xe8res de recherche"}),s.jsx("button",{onClick:clearFilters,className:"btn-primary",children:"Effacer les filtres"})]}):s.jsx("div",{className:`grid gap-6 ${"grid"===w?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4":"grid-cols-1"}`,children:t.map((e,t)=>s.jsx(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6,delay:.1*t},children:s.jsx(h.Z,{product:e})},e._id))}),E.totalPages>1&&s.jsx(i.E.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.6,delay:.3},className:"flex justify-center mt-12",children:(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[s.jsx(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>handlePageChange(E.page-1),disabled:1===E.page,className:"px-4 py-2 bg-dark-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-dark-700 transition-all duration-300",children:"Pr\xe9c\xe9dent"}),[...Array(E.totalPages)].map((e,t)=>{let a=t+1,r=a===E.page;return s.jsx(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>handlePageChange(a),className:`px-4 py-2 rounded-lg transition-all duration-300 ${r?"bg-white text-dark-950":"bg-dark-800 text-white hover:bg-dark-700"}`,children:a},a)}),s.jsx(i.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>handlePageChange(E.page+1),disabled:E.page===E.totalPages,className:"px-4 py-2 bg-dark-800 text-white rounded-lg disabled:opacity-50 disabled:cursor-not-allowed hover:bg-dark-700 transition-all duration-300",children:"Suivant"})]})})]})})]}),s.jsx(g.Z,{})]})}},3512:(e,t,a)=>{"use strict";a.r(t),a.d(t,{$$typeof:()=>l,__esModule:()=>i,default:()=>c});var s=a(5153);let r=(0,s.createProxy)(String.raw`C:\Users\nazim\Desktop\aldjaberqamis\aldjaberqamis-frontend\app\catalogue\page.tsx`),{__esModule:i,$$typeof:l}=r,n=r.default,c=n}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),a=t.X(0,[980,357,626,752,162,308,245,659,990,828],()=>__webpack_exec__(4778));module.exports=a})();