(()=>{var e={};e.id=285,e.ids=[285],e.modules={5403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},4749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},5528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},1877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},5319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},9491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},2361:e=>{"use strict";e.exports=require("events")},7147:e=>{"use strict";e.exports=require("fs")},3685:e=>{"use strict";e.exports=require("http")},5687:e=>{"use strict";e.exports=require("https")},2037:e=>{"use strict";e.exports=require("os")},1017:e=>{"use strict";e.exports=require("path")},2781:e=>{"use strict";e.exports=require("stream")},6224:e=>{"use strict";e.exports=require("tty")},7310:e=>{"use strict";e.exports=require("url")},3837:e=>{"use strict";e.exports=require("util")},9796:e=>{"use strict";e.exports=require("zlib")},4169:(e,s,a)=>{"use strict";a.r(s),a.d(s,{GlobalError:()=>l.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>o,routeModule:()=>u,tree:()=>c});var r=a(7096),t=a(6132),i=a(7284),l=a.n(i),n=a(2564),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);a.d(s,d);let c=["",{children:["checkout",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(a.bind(a,915)),"C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\checkout\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(a.bind(a,3304)),"C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(a.t.bind(a,9291,23)),"next/dist/client/components/not-found-error"]}],o=["C:\\Users\\nazim\\Desktop\\aldjaberqamis\\aldjaberqamis-frontend\\app\\checkout\\page.tsx"],m="/checkout/page",x={require:a,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:t.x.APP_PAGE,page:"/checkout/page",pathname:"/checkout",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9434:(e,s,a)=>{Promise.resolve().then(a.bind(a,4795))},4795:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>page});var r=a(784),t=a(9885),i=a(4571),l=a(7114),n=a(6558),d=a(8260),c=a(3680),o=a(7094),m=a(2316),x=a(8863),u=a(1251),p=a(9576);let h=[{code:"01",name:"Adrar",nameAr:"أدرار"},{code:"02",name:"Chlef",nameAr:"الشلف"},{code:"03",name:"Laghouat",nameAr:"الأغواط"},{code:"04",name:"Oum El Bouaghi",nameAr:"أم البواقي"},{code:"05",name:"Batna",nameAr:"باتنة"},{code:"06",name:"B\xe9ja\xefa",nameAr:"بجاية"},{code:"07",name:"Biskra",nameAr:"بسكرة"},{code:"08",name:"B\xe9char",nameAr:"بشار"},{code:"09",name:"Blida",nameAr:"البليدة"},{code:"10",name:"Bouira",nameAr:"البويرة"},{code:"11",name:"Tamanrasset",nameAr:"تمنراست"},{code:"12",name:"T\xe9bessa",nameAr:"تبسة"},{code:"13",name:"Tlemcen",nameAr:"تلمسان"},{code:"14",name:"Tiaret",nameAr:"تيارت"},{code:"15",name:"Tizi Ouzou",nameAr:"تيزي وزو"},{code:"16",name:"Alger",nameAr:"الجزائر"},{code:"17",name:"Djelfa",nameAr:"الجلفة"},{code:"18",name:"Jijel",nameAr:"جيجل"},{code:"19",name:"S\xe9tif",nameAr:"سطيف"},{code:"20",name:"Sa\xefda",nameAr:"سعيدة"},{code:"21",name:"Skikda",nameAr:"سكيكدة"},{code:"22",name:"Sidi Bel Abb\xe8s",nameAr:"سيدي بلعباس"},{code:"23",name:"Annaba",nameAr:"عنابة"},{code:"24",name:"Guelma",nameAr:"قالمة"},{code:"25",name:"Constantine",nameAr:"قسنطينة"},{code:"26",name:"M\xe9d\xe9a",nameAr:"المدية"},{code:"27",name:"Mostaganem",nameAr:"مستغانم"},{code:"28",name:"M'Sila",nameAr:"المسيلة"},{code:"29",name:"Mascara",nameAr:"معسكر"},{code:"30",name:"Ouargla",nameAr:"ورقلة"},{code:"31",name:"Oran",nameAr:"وهران"},{code:"32",name:"El Bayadh",nameAr:"البيض"},{code:"33",name:"Illizi",nameAr:"إليزي"},{code:"34",name:"Bordj Bou Arr\xe9ridj",nameAr:"برج بوعريريج"},{code:"35",name:"Boumerd\xe8s",nameAr:"بومرداس"},{code:"36",name:"El Tarf",nameAr:"الطارف"},{code:"37",name:"Tindouf",nameAr:"تندوف"},{code:"38",name:"Tissemsilt",nameAr:"تيسمسيلت"},{code:"39",name:"El Oued",nameAr:"الوادي"},{code:"40",name:"Khenchela",nameAr:"خنشلة"},{code:"41",name:"Souk Ahras",nameAr:"سوق أهراس"},{code:"42",name:"Tipaza",nameAr:"تيبازة"},{code:"43",name:"Mila",nameAr:"ميلة"},{code:"44",name:"A\xefn Defla",nameAr:"عين الدفلى"},{code:"45",name:"Na\xe2ma",nameAr:"النعامة"},{code:"46",name:"A\xefn T\xe9mouchent",nameAr:"عين تموشنت"},{code:"47",name:"Gharda\xefa",nameAr:"غرداية"},{code:"48",name:"Relizane",nameAr:"غليزان"}];var j=a(8699),f=a(345);let page=()=>{let e=(0,l.useRouter)(),{state:s,clearCart:a}=(0,u.useCart)(),[N,v]=(0,t.useState)(!1),{register:g,handleSubmit:b,formState:{errors:y},watch:A}=(0,n.cI)(),q=s.total>=5e3?0:500,w=s.total+q,onSubmit=async r=>{if(0===s.items.length){f.default.error("Votre panier est vide");return}v(!0);try{let t={...r,items:s.items.filter(e=>e.product).map(e=>({product:e.product._id,quantity:e.quantity,selectedSize:e.selectedSize,selectedColor:e.selectedColor,price:e.product.price})),subtotal:s.total,shipping:q,total:w},i=await p.kn.create(t);a(),e.push(`/commande/${i._id}`),f.default.success("Commande pass\xe9e avec succ\xe8s!")}catch(e){console.error("Erreur lors de la commande:",e),f.default.error("Erreur lors de la commande. Veuillez r\xe9essayer.")}finally{v(!1)}};return 0===s.items.length?(0,r.jsxs)("div",{className:"min-h-screen bg-dark-950",children:[r.jsx(m.Z,{}),r.jsx("main",{className:"pt-16",children:r.jsx("div",{className:"container-custom section-padding py-12 text-center",children:(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},children:[r.jsx("div",{className:"w-24 h-24 bg-dark-800 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(d.Z,{size:48,className:"text-dark-400"})}),r.jsx("h1",{className:"text-2xl font-bold text-white mb-4",children:"Votre panier est vide"}),r.jsx("p",{className:"text-dark-300 mb-6",children:"Ajoutez des produits \xe0 votre panier avant de passer commande."}),r.jsx("button",{onClick:()=>e.push("/catalogue"),className:"btn-primary",children:"Voir le catalogue"})]})})}),r.jsx(x.Z,{})]}):(0,r.jsxs)("div",{className:"min-h-screen bg-dark-950",children:[r.jsx(m.Z,{}),r.jsx("main",{className:"pt-16",children:r.jsx("div",{className:"container-custom section-padding py-12",children:(0,r.jsxs)(i.E.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{duration:.6},className:"max-w-4xl mx-auto",children:[r.jsx("h1",{className:"text-3xl font-bold text-white mb-8 text-center",children:"Finaliser votre commande"}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsx(i.E.div,{initial:{opacity:0,x:-30},animate:{opacity:1,x:0},transition:{duration:.6,delay:.2},className:"space-y-8",children:(0,r.jsxs)("form",{onSubmit:b(onSubmit),className:"space-y-6",children:[(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[r.jsx(c.Z,{className:"mr-2",size:20}),"Informations personnelles"]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Pr\xe9nom *"}),r.jsx("input",{...g("customer.firstName",{required:"Le pr\xe9nom est requis"}),className:"input-field",placeholder:"Votre pr\xe9nom"}),y.customer?.firstName&&r.jsx("p",{className:"form-error",children:y.customer.firstName.message})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Nom *"}),r.jsx("input",{...g("customer.lastName",{required:"Le nom est requis"}),className:"input-field",placeholder:"Votre nom"}),y.customer?.lastName&&r.jsx("p",{className:"form-error",children:y.customer.lastName.message})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"T\xe9l\xe9phone *"}),r.jsx("input",{...g("customer.phone",{required:"Le t\xe9l\xe9phone est requis",pattern:{value:/^(\+213|0)[5-7][0-9]{8}$/,message:"Num\xe9ro de t\xe9l\xe9phone alg\xe9rien invalide"}}),className:"input-field",placeholder:"0555123456"}),y.customer?.phone&&r.jsx("p",{className:"form-error",children:y.customer.phone.message})]})})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[r.jsx(o.Z,{className:"mr-2",size:20}),"Adresse de livraison"]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Adresse compl\xe8te *"}),r.jsx("input",{...g("delivery.address",{required:"L'adresse est requise"}),className:"input-field",placeholder:"Rue, quartier, num\xe9ro..."}),y.delivery?.address&&r.jsx("p",{className:"form-error",children:y.delivery.address.message})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Ville *"}),r.jsx("input",{...g("delivery.city",{required:"La ville est requise"}),className:"input-field",placeholder:"Votre ville"}),y.delivery?.city&&r.jsx("p",{className:"form-error",children:y.delivery.city.message})]}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Wilaya *"}),(0,r.jsxs)("select",{...g("delivery.wilaya",{required:"La wilaya est requise"}),className:"input-field",children:[r.jsx("option",{value:"",children:"S\xe9lectionner une wilaya"}),h.map(e=>r.jsx("option",{value:e.name,children:e.name},e.code))]}),y.delivery?.wilaya&&r.jsx("p",{className:"form-error",children:y.delivery.wilaya.message})]})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Code postal *"}),r.jsx("input",{...g("delivery.postalCode",{required:"Le code postal est requis",pattern:{value:/^\d{5}$/,message:"Code postal invalide (5 chiffres)"}}),className:"input-field",placeholder:"16000"}),y.delivery?.postalCode&&r.jsx("p",{className:"form-error",children:y.delivery.postalCode.message})]})}),(0,r.jsxs)("div",{className:"form-group",children:[r.jsx("label",{className:"form-label",children:"Notes de livraison (optionnel)"}),r.jsx("textarea",{...g("delivery.notes"),className:"input-field h-24 resize-none",placeholder:"Instructions sp\xe9ciales pour la livraison..."})]})]}),(0,r.jsxs)("div",{className:"card",children:[(0,r.jsxs)("h2",{className:"text-xl font-semibold text-white mb-6 flex items-center",children:[r.jsx(d.Z,{className:"mr-2",size:20}),"Paiement"]}),(0,r.jsxs)("div",{className:"bg-dark-800 rounded-lg p-4",children:[(0,r.jsxs)("p",{className:"text-dark-300 text-sm mb-2",children:[r.jsx("strong",{children:"Mode de paiement :"})," Paiement \xe0 la livraison"]}),r.jsx("p",{className:"text-dark-300 text-sm",children:"Vous paierez votre commande en esp\xe8ces lors de la livraison. Le livreur vous remettra un re\xe7u."})]})]}),r.jsx(i.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},type:"submit",disabled:N,className:"w-full btn-primary text-lg py-4 disabled:opacity-50 disabled:cursor-not-allowed",children:N?"Traitement...":"Confirmer la commande"})]})}),(0,r.jsxs)(i.E.div,{initial:{opacity:0,x:30},animate:{opacity:1,x:0},transition:{duration:.6,delay:.4},className:"space-y-6",children:[(0,r.jsxs)("div",{className:"card",children:[r.jsx("h2",{className:"text-xl font-semibold text-white mb-6",children:"R\xe9sum\xe9 de la commande"}),r.jsx("div",{className:"space-y-4 mb-6",children:s.items.filter(e=>e.product).map((e,s)=>(0,r.jsxs)("div",{className:"flex items-center space-x-4 p-4 bg-dark-800 rounded-lg",children:[r.jsx("div",{className:"w-16 h-16 bg-dark-700 rounded-lg overflow-hidden flex-shrink-0",children:e.product.images[0]?r.jsx("img",{src:e.product.images[0],alt:e.product.name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center text-dark-400",children:r.jsx(d.Z,{size:24})})}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[r.jsx("h4",{className:"text-white font-medium truncate",children:e.product.name}),(0,r.jsxs)("p",{className:"text-dark-400 text-sm",children:[e.selectedSize," • ",e.selectedColor]}),(0,r.jsxs)("p",{className:"text-dark-400 text-sm",children:["Quantit\xe9: ",e.quantity]})]}),r.jsx("div",{className:"text-right",children:r.jsx("p",{className:"text-white font-semibold",children:(0,j.T4)(e.product.price*e.quantity)})})]},s))}),(0,r.jsxs)("div",{className:"space-y-3 border-t border-dark-700 pt-4",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-dark-300",children:"Sous-total"}),r.jsx("span",{className:"text-white",children:(0,j.T4)(s.total)})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-dark-300",children:"Livraison"}),r.jsx("span",{className:"text-white",children:0===q?"Gratuite":(0,j.T4)(q)})]}),0===q&&r.jsx("p",{className:"text-green-400 text-sm",children:"✓ Livraison gratuite pour les commandes de plus de 5000 DA"}),(0,r.jsxs)("div",{className:"flex justify-between text-lg font-semibold border-t border-dark-700 pt-3",children:[r.jsx("span",{className:"text-white",children:"Total"}),r.jsx("span",{className:"text-white",children:(0,j.T4)(w)})]})]})]}),(0,r.jsxs)("div",{className:"card",children:[r.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Informations importantes"}),(0,r.jsxs)("div",{className:"space-y-3 text-sm text-dark-300",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-white rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{children:"Votre commande sera trait\xe9e dans les 24h"})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-white rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{children:"Livraison gratuite pour les commandes de plus de 5000 DA"})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-white rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{children:"D\xe9lai de livraison: 2-5 jours ouvr\xe9s"})]}),(0,r.jsxs)("div",{className:"flex items-start space-x-2",children:[r.jsx("div",{className:"w-2 h-2 bg-white rounded-full mt-2 flex-shrink-0"}),r.jsx("p",{children:"Paiement \xe0 la livraison uniquement"})]})]})]})]})]})]})})}),r.jsx(x.Z,{})]})}},915:(e,s,a)=>{"use strict";a.r(s),a.d(s,{$$typeof:()=>l,__esModule:()=>i,default:()=>d});var r=a(5153);let t=(0,r.createProxy)(String.raw`C:\Users\nazim\Desktop\aldjaberqamis\aldjaberqamis-frontend\app\checkout\page.tsx`),{__esModule:i,$$typeof:l}=t,n=t.default,d=n}};var s=require("../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),a=s.X(0,[980,357,626,752,162,323,245,659],()=>__webpack_exec__(4169));module.exports=a})();