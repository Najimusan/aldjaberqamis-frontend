exports.id=167,exports.ids=[167],exports.modules={7353:(e,a,s)=>{Promise.resolve().then(s.bind(s,7304))},7304:(e,a,s)=>{"use strict";s.r(a),s.d(a,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var t=s(784),r=s(9885),l=s(7114),i=s(1440),n=s.n(i),o=s(4571),d=s(7849),c=s(7004),m=s(5894),h=s(1672),x=s(6206),u=s(7382),f=s(92),g=s(345);let __WEBPACK_DEFAULT_EXPORT__=({children:e})=>{let[a,s]=(0,r.useState)(!1),[i,p]=(0,r.useState)(!0),[b,j]=(0,r.useState)(!1),v=(0,l.useRouter)(),y=(0,l.usePathname)(),[N,w]=(0,r.useState)(""),[_,k]=(0,r.useState)(!0),T=[{name:"Tableau de bord",href:"/admin/dashboard",icon:d.Z,roles:["super_admin","admin","manager"]},{name:"Produits",href:"/admin/produits",icon:c.Z,roles:["super_admin","admin"]},{name:"Commandes",href:"/admin/commandes",icon:m.Z,roles:["super_admin","admin","manager"]},{name:"Utilisateurs",href:"/admin/utilisateurs",icon:h.Z,roles:["super_admin"]}];return((0,r.useEffect)(()=>{if("/admin/login"===y){p(!1);return}let checkAuth=async()=>{let e=localStorage.getItem("adminToken");if(!e){v.push("/admin/login");return}try{let a=await fetch("http://localhost:5000/api/auth/verify",{headers:{Authorization:`Bearer ${e}`}});if(a.ok){let e=await a.json();console.log("Layout - Donn\xe9es utilisateur:",e),w(e.data.user.role),s(!0)}else localStorage.removeItem("adminToken"),v.push("/admin/login")}catch(e){localStorage.removeItem("adminToken"),v.push("/admin/login")}finally{p(!1),k(!1)}};checkAuth()},[v,y]),"/admin/login"===y)?t.jsx(t.Fragment,{children:e}):i?t.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center",children:t.jsx("div",{className:"text-white text-xl",children:"Chargement..."})}):a?(0,t.jsxs)("div",{className:"min-h-screen bg-black",children:[t.jsx("div",{className:"lg:hidden fixed top-4 left-4 z-50",children:t.jsx(o.E.button,{whileHover:{scale:1.05},whileTap:{scale:.95},onClick:()=>j(!b),className:"p-2 bg-gray-800 text-white rounded-lg",children:b?t.jsx(x.Z,{className:"w-6 h-6"}):t.jsx(u.Z,{className:"w-6 h-6"})})}),t.jsx("div",{className:`fixed inset-y-0 left-0 z-40 w-64 bg-gray-900 transform transition-transform duration-300 ease-in-out lg:translate-x-0 ${b?"translate-x-0":"-translate-x-full"}`,children:(0,t.jsxs)("div",{className:"flex flex-col h-full",children:[t.jsx("div",{className:"flex items-center justify-center h-16 px-4 border-b border-gray-700",children:t.jsx("h1",{className:"text-xl font-bold text-white",children:"Al Djaber Qamis"})}),t.jsx("nav",{className:"flex-1 px-4 py-6 space-y-2",children:_?t.jsx("div",{className:"text-center text-gray-400",children:"Chargement..."}):T.filter(e=>!N||e.roles.includes(N)).map(e=>{let a=y===e.href;return(0,t.jsxs)(n(),{href:e.href,onClick:()=>{console.log("Navigation vers:",e.href),j(!1)},className:`flex items-center px-4 py-3 text-sm font-medium rounded-lg transition-colors ${a?"bg-white text-black":"text-gray-300 hover:bg-gray-700 hover:text-white"}`,children:[t.jsx(e.icon,{className:"w-5 h-5 mr-3"}),e.name]},e.name)})}),t.jsx("div",{className:"p-4 border-t border-gray-700",children:(0,t.jsxs)(o.E.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>{localStorage.removeItem("adminToken"),v.push("/admin/login")},className:"flex items-center w-full px-4 py-3 text-sm font-medium text-red-400 hover:bg-gray-700 rounded-lg transition-colors",children:[t.jsx(f.Z,{className:"w-5 h-5 mr-3"}),"D\xe9connexion"]})})]})}),b&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-30 lg:hidden",onClick:()=>j(!1)}),t.jsx("div",{className:"lg:ml-64",children:t.jsx("main",{className:"min-h-screen",children:e})}),t.jsx(g.Toaster,{position:"top-right",toastOptions:{duration:4e3,style:{background:"#1f2937",color:"#fff",border:"1px solid #374151"}}})]}):null}},2458:(e,a,s)=>{"use strict";s.r(a),s.d(a,{$$typeof:()=>i,__esModule:()=>l,default:()=>o});var t=s(5153);let r=(0,t.createProxy)(String.raw`C:\Users\nazim\Desktop\aldjaberqamis\aldjaberqamis-frontend\app\admin\layout.tsx`),{__esModule:l,$$typeof:i}=r,n=r.default,o=n}};